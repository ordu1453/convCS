/**
 * @file converter.h
 * @brief Заголовочный файл основного модуля управления преобразователем
 *
 * Этот файл содержит объявления функций для управления преобразователем,
 * включая инициализацию, основной цикл обработки и получение состояния.
 *
 * @author ordum
 * @date Oct 16, 2025
 */

#ifndef INC_CONVERTER_H_
#define INC_CONVERTER_H_

#include "config.h"

/**
 * @brief Инициализация преобразователя
 *
 * Выполняет начальную инициализацию всех подсистем преобразователя.
 * Должна быть вызвана один раз при старте системы.
 *
 * @note Только для реального оборудования (не используется в тестах)
 */
void converterInit(void);

/**
 * @brief Основной процесс управления преобразователем
 *
 * Выполняет один цикл управления преобразователем, включая:
 * - Диагностику системы
 * - Управление ШИМ
 * - ПИ-регулирование
 * - Управление предзарядом
 * - Отправку телеметрии
 *
 * @param state Запрошенное состояние системы для перехода
 *
 * @note Вызывается периодически с периодом CONTROL_DT_MS
 */
void converterProcess(SystemState_t state);

/**
 * @brief Получение текущего состояния системы
 *
 * Возвращает текущее состояние преобразователя.
 *
 * @return Текущее состояние системы (SystemState_t)
 */
SystemState_t ConverterGetState(void);

#endif /* INC_CONVERTER_H_ */
