/**
 * @file diag.h
 * @brief Заголовочный файл модуля диагностики
 *
 * Этот файл содержит объявления функций для диагностики состояния системы,
 * включая проверку параметров датчиков и состояния драйверов IGBT.
 *
 * @author ordum
 * @date Oct 16, 2025
 */

#ifndef INC_DIAG_H_
#define INC_DIAG_H_

#include <stdint.h>
#include "types.h"

/**
 * @brief Инициализация модуля диагностики
 *
 * Выполняет начальную настройку модуля диагностики.
 * В текущей реализации может быть пустой функцией-заглушкой.
 *
 * @note Зарезервировано для будущих расширений
 */
void diagInit(void);

/**
 * @brief Проверка состояния системы на наличие ошибок
 *
 * Выполняет комплексную проверку всех критических параметров системы:
 * - Токи (входной, выходной, дросселя)
 * - Напряжения (входное, выходное)
 * - Состояние драйверов IGBT
 *
 * @param s Указатель на структуру с текущими значениями датчиков
 * @param errorMask Указатель на переменную для сохранения битовой маски ошибок
 * @return Статус наличия ошибок
 * @retval 0 Ошибок не обнаружено
 * @retval 1 Обнаружена хотя бы одна ошибка
 *
 * @see diag.c для подробного описания кодов ошибок
 */
uint8_t diagCheck(const SensorValues_t* s, uint32_t* errorMask);

#endif /* INC_DIAG_H_ */
